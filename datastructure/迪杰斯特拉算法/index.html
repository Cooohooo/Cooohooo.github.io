<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dijkstra 算法示例演示 | Cary</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="专注于记录一些从开始到入门踩过的坑">
    <link rel="preload" href="/assets/css/0.styles.b8e99327.css" as="style"><link rel="preload" href="/assets/js/app.b1624e8e.js" as="script"><link rel="preload" href="/assets/js/2.12e8692c.js" as="script"><link rel="preload" href="/assets/js/26.d8d44464.js" as="script"><link rel="prefetch" href="/assets/js/10.eff93b86.js"><link rel="prefetch" href="/assets/js/11.793fbf77.js"><link rel="prefetch" href="/assets/js/12.4a71ec38.js"><link rel="prefetch" href="/assets/js/13.093a470d.js"><link rel="prefetch" href="/assets/js/14.c529c00a.js"><link rel="prefetch" href="/assets/js/15.9cc56e10.js"><link rel="prefetch" href="/assets/js/16.f161731c.js"><link rel="prefetch" href="/assets/js/17.438c44df.js"><link rel="prefetch" href="/assets/js/18.c02afc3a.js"><link rel="prefetch" href="/assets/js/19.c4b19fba.js"><link rel="prefetch" href="/assets/js/20.dec86c76.js"><link rel="prefetch" href="/assets/js/21.1b6d07c1.js"><link rel="prefetch" href="/assets/js/22.44c5118e.js"><link rel="prefetch" href="/assets/js/23.4da8ff8e.js"><link rel="prefetch" href="/assets/js/24.fdc9730d.js"><link rel="prefetch" href="/assets/js/25.806070ea.js"><link rel="prefetch" href="/assets/js/27.03a5f16f.js"><link rel="prefetch" href="/assets/js/28.e9711547.js"><link rel="prefetch" href="/assets/js/29.c20512e0.js"><link rel="prefetch" href="/assets/js/3.964ad172.js"><link rel="prefetch" href="/assets/js/30.ff71561f.js"><link rel="prefetch" href="/assets/js/31.44701f47.js"><link rel="prefetch" href="/assets/js/32.060499f3.js"><link rel="prefetch" href="/assets/js/33.c8f8e25c.js"><link rel="prefetch" href="/assets/js/34.484e7f5b.js"><link rel="prefetch" href="/assets/js/35.d0e86e52.js"><link rel="prefetch" href="/assets/js/36.6e9c597a.js"><link rel="prefetch" href="/assets/js/37.d0ea72cc.js"><link rel="prefetch" href="/assets/js/38.635da6e1.js"><link rel="prefetch" href="/assets/js/39.c6c12926.js"><link rel="prefetch" href="/assets/js/4.9e3305df.js"><link rel="prefetch" href="/assets/js/40.77988a3a.js"><link rel="prefetch" href="/assets/js/41.09ced7b0.js"><link rel="prefetch" href="/assets/js/42.f0c83ede.js"><link rel="prefetch" href="/assets/js/43.8433eb78.js"><link rel="prefetch" href="/assets/js/44.9a1d5c63.js"><link rel="prefetch" href="/assets/js/45.cb79a166.js"><link rel="prefetch" href="/assets/js/5.536117a3.js"><link rel="prefetch" href="/assets/js/6.fdeca71c.js"><link rel="prefetch" href="/assets/js/7.b91670df.js"><link rel="prefetch" href="/assets/js/8.53ae3032.js"><link rel="prefetch" href="/assets/js/9.2475cef8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b8e99327.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cary</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  目录
</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  目录
</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Dijkstra 算法示例演示</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/datastructure/%E8%BF%AA%E6%9D%B0%E6%96%AF%E7%89%B9%E6%8B%89%E7%AE%97%E6%B3%95/#dijkstra-算法基本概念" class="sidebar-link">Dijkstra 算法基本概念</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dijkstra-算法示例演示"><a href="#dijkstra-算法示例演示" class="header-anchor">#</a> Dijkstra 算法示例演示</h1> <p>转载自：https://blog.csdn.net/qq_35644234/article/details/60870719</p> <h2 id="dijkstra-算法基本概念"><a href="#dijkstra-算法基本概念" class="header-anchor">#</a> Dijkstra 算法基本概念</h2> <ul><li>初始一个数组 S = { s }，S = V 时算法结束，V 指的是全部顶点的集合</li> <li>从 s 到 u 相对于 S 的最短路径：从 s 到 u 且仅经过 S 中的顶点的最短路径</li> <li>定义一个 dist[u]数组，用来储存 s 到 u 相对 S 最短路径的长度</li> <li>short[u]数组储存的是正确的最短路径的长度集合</li> <li>dist[u] &gt;= short[u]，因此我们需要不断更新 dist 中的数值，当我们不断将 V 中的顶点往 S 集合中放</li></ul> <p>求下图，从顶点 v1 到其他各个顶点的最短路径</p> <p><img src="https://raw.githubusercontent.com/Cooohooo/cary-notebook-image/master/images/d1.png" alt="d1"></p> <p>首先第一步，我们先声明一个 dis 数组，该数组初始化的值为：</p> <p><img src="https://raw.githubusercontent.com/Cooohooo/cary-notebook-image/master/images/d2.png" alt="d2"></p> <p>我们的顶点集 T 的初始化为：T={v1} <br></p> <p>既然是求 v1 顶点到其余各个顶点的最短路程，那就先找一个离 1 号顶点最近的顶点。通过数组 dis 可知当前离 v1 顶点最近是 v3 顶点。当选择了 2 号顶点后，dis[2]（下标从 0 开始）的值就已经从“估计值”变为了“确定值”，即 v1 顶点到 v3 顶点的最短路程就是当前 dis[2]值。将 V3 加入到 T 中 <br></p> <p>为什么呢？因为目前离 v1 顶点最近的是 v3 顶点，并且这个图所有的边都是正数，那么肯定不可能通过第三个顶点中转，使得 v1 顶点到 v3 顶点的路程进一步缩短了。因为 v1 顶点到其它顶点的路程肯定没有 v1 到 v3 顶点短 <br></p> <p>OK，既然确定了一个顶点的最短路径，下面我们就要根据这个新入的顶点 V3 会有出度，发现以 v3 为弧尾的有： &lt; v3,v4 &gt;,那么我们看看路径：v1–v3–v4 的长度是否比 v1–v4 短，其实这个已经是很明显的了，因为 dis[3]代表的就是 v1–v4 的长度为无穷大，而 v1–v3–v4 的长度为：10+50=60，所以更新 dis[3]的值,得到如下结果：</p> <p><img src="https://raw.githubusercontent.com/Cooohooo/cary-notebook-image/master/images/d3.png" alt="d3"></p> <p>因此 dis[3]要更新为 60。这个过程有个专业术语叫做“松弛”。即 v1 顶点到 v4 顶点的路程即 dis[3]，通过 &lt; v3,v4&gt; 这条边松弛成功。这便是 Dijkstra 算法的主要思想：通过“边”来松弛 v1 顶点到其余各个顶点的路程<br></p> <p>然后，我们又从除 dis[2]和 dis[0]外的其他值中寻找最小值，发现 dis[4]的值最小，通过之前是解释的原理，可以知道 v1 到 v5 的最短距离就是 dis[4]的值，然后，我们把 v5 加入到集合 T 中，然后，考虑 v5 的出度是否会影响我们的数组 dis 的值，v5 有两条出度：&lt; v5,v4&gt;和 &lt; v5,v6&gt;,然后我们发现：v1–v5–v4 的长度为：50，而 dis[3]的值为 60，所以我们要更新 dis[3]的值.另外，v1-v5-v6 的长度为：90，而 dis[5]为 100，所以我们需要更新 dis[5]的值。更新后的 dis 数组如下图：<br></p> <p><img src="https://raw.githubusercontent.com/Cooohooo/cary-notebook-image/master/images/d4.png" alt="d4"></p> <p>然后，继续从 dis 中选择未确定的顶点的值中选择一个最小的值，发现 dis[3]的值是最小的，所以把 v4 加入到集合 T 中，此时集合 T={v1,v3,v5,v4},然后，考虑 v4 的出度是否会影响我们的数组 dis 的值，v4 有一条出度：&lt; v4,v6&gt;,然后我们发现：v1–v5–v4–v6 的长度为：60，而 dis[5]的值为 90，所以我们要更新 dis[5]的值，更新后的 dis 数组如下图：</p> <p><img src="https://raw.githubusercontent.com/Cooohooo/cary-notebook-image/master/images/d5.png" alt="d5"></p> <p>然后，我们使用同样原理，分别确定了 v6 和 v2 的最短路径，最后 dis 的数组的值如下：<br></p> <p><img src="https://raw.githubusercontent.com/Cooohooo/cary-notebook-image/master/images/d6.png" alt="d6"></p> <p>因此，从图中，我们可以发现 v1-v2 的值为：∞，代表没有路径从 v1 到达 v2。所以我们得到的最后的结果为：</p> <table><thead><tr><th>起点</th> <th>终点</th> <th>最短路径</th> <th>长度</th></tr></thead> <tbody><tr><td>v1</td> <td>v2</td> <td>无</td> <td>∞</td></tr> <tr><td></td> <td>v3</td> <td>{v1,v3}</td> <td>10</td></tr> <tr><td></td> <td>v4</td> <td>{v1,v5,v4}</td> <td>50</td></tr> <tr><td></td> <td>v5</td> <td>{v1,v5}</td> <td>30</td></tr> <tr><td></td> <td>v6</td> <td>{v1,v5,v4,v6}</td> <td>60</td></tr></tbody></table> <p><br>Graph 是邻接矩阵对应的结构体
vexs 用于保存顶点，vexnum 是顶点数，edgnum 是边数；matrix 则是用于保存矩阵信息的二维数组<br></p> <p>例如，matrix[i][j]=1，则表示”顶点 i(即 vexs[i])”和”顶点 j(即 vexs[j])”是邻接点；matrix[i][j]=0，则表示它们不是邻接点<br></p> <p>EData 是邻接矩阵边对应的结构体。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">/*
 * Dijkstra最短路径。
 * 即，统计图(G)中&quot;顶点vs&quot;到其它各个顶点的最短路径。
 *
 * 参数说明：
 *        G -- 图
 *       vs -- 起始顶点(start vertex)。即计算&quot;顶点vs&quot;到其它顶点的最短路径。
 *     prev -- 前驱顶点数组。即，prev[i]的值是&quot;顶点vs&quot;到&quot;顶点i&quot;的最短路径所经历的全部顶点中，位于&quot;顶点i&quot;之前的那个顶点。
 *     dist -- 长度数组。即，dist[i]是&quot;顶点vs&quot;到&quot;顶点i&quot;的最短路径的长度。
 */</span>
<span class="token keyword">void</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> vs<span class="token punctuation">,</span> <span class="token keyword">int</span> prev<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> dist<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">;</span>
    <span class="token keyword">int</span> min<span class="token punctuation">;</span>
    <span class="token keyword">int</span> tmp<span class="token punctuation">;</span>
    <span class="token keyword">int</span> flag<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// flag[i]=1表示&quot;顶点vs&quot;到&quot;顶点i&quot;的最短路径已成功获取。</span>

    <span class="token comment">// 初始化</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>              <span class="token comment">// 顶点i的最短路径还没获取到。</span>
        prev<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>              <span class="token comment">// 顶点i的前驱顶点为0。</span>
        dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> G<span class="token punctuation">.</span>matrix<span class="token punctuation">[</span>vs<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 顶点i的最短路径为&quot;顶点vs&quot;到&quot;顶点i&quot;的权。将与初始点有连线的顶点加上权值</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 对&quot;顶点vs&quot;自身进行初始化</span>
    flag<span class="token punctuation">[</span>vs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    dist<span class="token punctuation">[</span>vs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 遍历G.vexnum-1次；每次找出一个顶点的最短路径。</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// 寻找当前最小的路径；</span>
        <span class="token comment">// 即，在未获取最短路径的顶点中，找到离vs最近的顶点(k)。</span>
        min <span class="token operator">=</span> INF<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> dist<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&lt;</span>min<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                min <span class="token operator">=</span> dist<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                k <span class="token operator">=</span> j<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 标记&quot;顶点k&quot;为已经获取到最短路径</span>
        flag<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// 修正当前最短路径和前驱顶点</span>
        <span class="token comment">// 即，当已经&quot;顶点k的最短路径&quot;之后，更新&quot;未获取最短路径的顶点的最短路径和前驱顶点&quot;。</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            tmp <span class="token operator">=</span> <span class="token punctuation">(</span>G<span class="token punctuation">.</span>matrix<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span>INF <span class="token operator">?</span> INF <span class="token operator">:</span> <span class="token punctuation">(</span>min <span class="token operator">+</span> G<span class="token punctuation">.</span>matrix<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 防止溢出</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>tmp  <span class="token operator">&lt;</span> dist<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                dist<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                prev<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 打印dijkstra最短路径的结果</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;dijkstra(%c): \n&quot;</span><span class="token punctuation">,</span> G<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>vs<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;  shortest(%c, %c)=%d\n&quot;</span><span class="token punctuation">,</span> G<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>vs<span class="token punctuation">]</span><span class="token punctuation">,</span> G<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b1624e8e.js" defer></script><script src="/assets/js/2.12e8692c.js" defer></script><script src="/assets/js/26.d8d44464.js" defer></script>
  </body>
</html>
